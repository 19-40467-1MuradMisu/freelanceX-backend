spring.application.name=ApiGateway
server.port=8080
spring.cloud.discovery.enabled=true

# Eureka Discovery Settings
eureka.client.service-url.defaultZone=http://eureka-server:8761/eureka/
eureka.instance.prefer-ip-address=true
eureka.client.register-with-eureka=true

management.endpoints.web.exposure.include=health,info,metrics,gateway
management.endpoint.gateway.enabled=true

# (Optional) globally strip the first path segment (e.g. "/api") 
# before forwarding to downstream services
#spring.cloud.gateway.default-filters[0]=StripPrefix=1

#----------------------------------------
# Route Definitions
#----------------------------------------

# BiddingService (port 8083)
spring.cloud.gateway.routes[0].id=bid-service
spring.cloud.gateway.routes[0].uri=lb://BiddingService
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/bid/**

spring.cloud.gateway.routes[1].id=contract-service
spring.cloud.gateway.routes[1].uri=lb://BiddingService
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/contract/**

# JobService (port 8082)
spring.cloud.gateway.routes[2].id=job-service
spring.cloud.gateway.routes[2].uri=lb://JobService
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/jobs/**

# NotificationService (port 8086)
spring.cloud.gateway.routes[3].id=notification-service
spring.cloud.gateway.routes[3].uri=lb://NotificationService
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/notifications/**

# PaymentService (port 8084)
spring.cloud.gateway.routes[4].id=payment-service
spring.cloud.gateway.routes[4].uri=lb://PaymentService
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/payment/**

# RatingService (port 8085)
spring.cloud.gateway.routes[5].id=rating-service
spring.cloud.gateway.routes[5].uri=lb://RatingService
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/ratings/**

# SkillService (port 8087)
spring.cloud.gateway.routes[6].id=skill-service
spring.cloud.gateway.routes[6].uri=lb://SkillService
spring.cloud.gateway.routes[6].predicates[0]=Path=/api/skill/**

# UserService – Authentication endpoints
spring.cloud.gateway.routes[7].id=user-auth
spring.cloud.gateway.routes[7].uri=lb://UserService
spring.cloud.gateway.routes[7].predicates[0]=Path=/api/auth/**

# UserService – User management endpoints
spring.cloud.gateway.routes[8].id=user-management
spring.cloud.gateway.routes[8].uri=lb://UserService
spring.cloud.gateway.routes[8].predicates[0]=Path=/api/user/**
